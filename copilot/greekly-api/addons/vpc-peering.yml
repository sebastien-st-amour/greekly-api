Parameters:
  App:
    Type: String
    Description: Your application's name.
  Env:
    Type: String
    Description: The environment name your service, job, or workflow is being deployed to.
  Name:
    Type: String
    Description: The name of the service, job, or workflow being deployed.
Resources:
  vpcPeeringConnection:
    Metadata:
      'aws:copilot:description': 'VPC Peering Connection to default VPC'
    Type: AWS::EC2::VPCPeeringConnection
    Properties: 
      PeerOwnerId: !Ref AWS::AccountId
      PeerRegion: !Ref AWS::Region
      PeerVpcId: vpc-f504289d
      VpcId:
        Fn::ImportValue: !Sub "${App}-${Env}-VpcId"

Outputs:
  vpcPeeringConnectionId:
    Description: VPC Peering Connection Id
    Value: !Ref vpcPeeringConnection